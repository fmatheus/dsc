<div data-ng-init="vm.intitOnion()">

<svg id="svg" height="800" width="1200">
    <circle id="legendCommunity" cx="1065" cy="10" r="8" style="fill: #E0F2F1;" ng-mouseover="vm.acende('Community');" ng-mouseleave="vm.apaga('Community','#E0F2F1');"/>
    <text id="nameCommunity" style="font-size: 14px" x="1075" y="15" ng-mouseover="vm.acende('Community');" ng-mouseleave="vm.apaga('Community','#E0F2F1');">{{'COMMUNITY_LABEL' | translate}}</text>
    <text x="1070" y="25" style="font-size: 10px">{{'COMMUNITY_DESCRIPTION' | translate}}</text>

    <circle id="legendMarket" cx="1065" cy="40" r="8" style="fill: #B2DFDB;" ng-mouseover="vm.acende('Market');" ng-mouseleave="vm.apaga('Market','#B2DFDB');"/>
    <text id="nameMarket" x="1075" y="45" ng-mouseover="vm.acende('Market');" ng-mouseleave="vm.apaga('Market','#B2DFDB');">{{'MARKET_LABEL' | translate}}</text>
    <text x="1070" y="55" style="font-size: 10px">{{'MARKET_DESCRIPTION' | translate}}</text>
    <circle id="legendSource" cx="1065" cy="70" r="8" style="fill: #80CBC4;" ng-mouseover="vm.acende('Source');" ng-mouseleave="vm.apaga('Source','#80CBC4');"/>
    <text id="nameSource" x="1075" y="75" ng-mouseover="vm.acende('Source');" ng-mouseleave="vm.apaga('Source','#80CBC4');">{{'SOURCE_LABEL' | translate}}</text>
    <text x="1070" y="85" style="font-size: 10px">{{'SOURCE_DESCRIPTION' | translate}}</text>
    <circle id="legendContribution" cx="1065" cy="100" r="8" style="fill: #4DB6AC;" ng-mouseover="vm.acende('Contribution');" ng-mouseleave="vm.apaga('Contribution','#4DB6AC');"/>
    <text id="nameContribution" x="1075" y="105" ng-mouseover="vm.acende('Contribution');" ng-mouseleave="vm.apaga('Contribution','#4DB6AC');">{{'CONTRIBUTION_LABEL' | translate}}</text>
    <text x="1070" y="115" style="font-size: 10px">{{'CONTRIBUTION_DESCRIPTION' | translate}}</text>
    <circle id="legendOperation" cx="1065" cy="130" r="8" style="fill: #26A69A;" ng-mouseover="vm.acende('Operation');" ng-mouseleave="vm.apaga('Operation','#26A69A');"/>
    <text id="nameOperation" x="1075" y="135"  ng-mouseover="vm.acende('Operation');" ng-mouseleave="vm.apaga('Operation','#26A69A');">{{'LABEL_OPERATION' | translate}}</text>
    <text x="1070" y="145" style="font-size: 10px">{{'TECHNICO_DESCRIPTION' | translate}}</text>


    <ellipse id="Community"75 cx="600" cy="320" rx="480" ry="320" fill="#E0F2F1"  ng-mouseover="vm.acende('Community');" ng-mouseleave="vm.apaga('Community','#E0F2F1');" ng-dblclick="vm.addPostIt($event, 'Community');"/>
    <ellipse id="Market" cx="600" cy="380" rx="390" ry="260" fill="#B2DFDB"  ng-mouseover="vm.acende('Market');" ng-mouseleave="vm.apaga('Market','#B2DFDB');" ng-dblclick="vm.addPostIt($event, 'Market');"/>
    <ellipse id="Source" cx="600" cy="440" rx="300" ry="200" fill="#80CBC4"  ng-mouseover="vm.acende('Source');" ng-mouseleave="vm.apaga('Source','#80CBC4')"; ng-dblclick="vm.addPostIt($event, 'Source');"/>
    <ellipse id="Contribution" cx="600" cy="500" rx="210" ry="140" fill="#4DB6AC"  ng-mouseover="vm.acende('Contribution');" ng-mouseleave="vm.apaga('Contribution','#4DB6AC');" ng-dblclick="vm.addPostIt($event, 'Contribution');"/>
    <ellipse id="Operation" cx="600" cy="560" rx="120" ry="80" fill="#26A69A"  ng-mouseover="vm.acende('Operation');" ng-mouseleave="vm.apaga('Operation','#26A69A');" ng-dblclick="vm.addPostIt($event, 'Operation');"/>
</svg>



    <div ng-repeat="stakeholder in vm.stakeholderList">
        <div draggable  style="position: absolute; top: {{stakeholder.y}}; left:{{stakeholder.x}}; z-index:{{stakeholder.zindex}}" class="sticky-note" id="stakeholder{{stakeholder._id}}">
            <span ng-hide="stakeholder.openEdit"><i class="pin"></i></span>
            <div id="moveStakeholder" ng-hide="stakeholder.openEdit">
                <div class="btnedit"><span ng-click="vm.setOpenEdit(stakeholder._id)">{{stakeholder.name}}</span>
                    <span class="acaoNormal">
                    <a ng-click="vm.delPostIt($event,$index, stakeholder)"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAACqklEQVQ4T4WTXUiTURjHn/ec933Xq5OZ5ucc5kydTtYqBmWRQVhBmN6JRdlFpKBd6CLLoCaVBmKR5EVYI7xQL1IQkUiEAjXBCZof86MiP3jT5rKltY9370ds4LCa+lyci/M/53ee5/+ch3iiVqccOpdrjk9UJQy+ML+8MGGthm3iEUBEdEpyTWxq2qkv/QMtRJ+xfPrgmZw0+ud3YPv7vH3tXeaLi0slwRj1FHU4Tad7HqPNSF2aX5ifHRq8RViqKr9mHtDG7VpbAVj4DJx1FHrfjU5ZVpxZJgCHD2QCQEnhild6vT7fgZBzYmy8vNRub/JphG95plKVG3T7bqfL+UjMzoHT5oChZbd9bM2bTpGkRkOTnUqlMmLS6bZMsewxEwC3kaEfsBHNclmDLgyX7BEFivOIMOMSfjECMHKSxMOi1FzCeYv+Le0vgE+sB1DFM2SXRhT3Y14ClyjBACbrKnj+RjBf/gOYAEL2kqQlU+AzQAKgMAEjGA1f5gTDjoB6BlRqDo0kC2LkGkGAFaNuDQ2nE0MQ2b4OTys83mtblvAgFGK0LmI6SZTCBUzAe4zayjih8D6N8/KiqXY5g1HTR6++BrixzRB/Cb42pWI0nyGKCRRFwAcCzZ33CEkbB+/QuKBYzbSNrvJzZ23uwH6gjY0YtWRJYiEjw7CMCP4tj7XVHs/s5pcaGPphbixd2bHkuWp0e/1/wA+4CxCdHbWbVXl+kwIpQrcTao1uviqYYR3hshkFIqJOrrojAoDHirAreTknmsIWpmH1Gyv12qTEUpdrMRjgHkDyUYVs0uriC8o4odOfQW2o7EzRTePrOMEBsz09Qtf4p9jr62Dfap4aabJOCfAjn+NrAh60ZmcNHjluMLwxt7YUs7ZL2wyjX/KZbgIQA4CdLmyn/wENmQFM5/MDlQAAAABJRU5ErkJggg==" />
                    <md-tooltip>
                        {{'BTN_REMOVE' | translate }}   {{ stakeholder.name}}
                    </md-tooltip>
                    </a>
                        </span>
                </div>
            </div>
            <div ng-show=stakeholder.openEdit layout="column">
                <div layout="row" layout-align="start start" flex>
                    <span>{{stakeholder.onionlayer}}</span>
                    <span flex></span>
                    <span class="acaoNormal">
                        <img ng-click="vm.minimizeStakeholder(stakeholder)" width="16" height="16" src="views/img/icon/minimize2.svg">
                    <md-tooltip>{{"LABEL_MINIMIZE" | translate}}</md-tooltip>
                    </span>
                </div>


                <form name="onionForm" data-ng-submit="vm.saveStakeholder(stakeholder)">
                    <div layout="row">
                        <md-input-container flex>
                            <label> Stakeholder </label>
                            <input class="description" ng-model="stakeholder.name" required>
                        </md-input-container>
                    </div>

                    <div layout="row">
                        <md-input-container flex>
                            <label>Description</label>
                            <textarea class="description" ng-model="stakeholder.description" required></textarea>
                        </md-input-container>
                    </div>

                    <div layout="column" flex>
                        <div>
                            <h4>{{'VALUES' | translate }}</h4>
                        </div>
                        <div ng-repeat="value in stakeholder.values">
                            <div>
                                <span>{{value}} </span>
                                <span class="acaoNormal" ng-click="vm.removeValueIdentication(value,stakeholder)">
                                    <img src="data:image/svg+xml;utf8;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/Pgo8IS0tIEdlbmVyYXRvcjogQWRvYmUgSWxsdXN0cmF0b3IgMTguMS4xLCBTVkcgRXhwb3J0IFBsdWctSW4gLiBTVkcgVmVyc2lvbjogNi4wMCBCdWlsZCAwKSAgLS0+CjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDE2IDE2IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCAxNiAxNjsiIHhtbDpzcGFjZT0icHJlc2VydmUiIHdpZHRoPSIxNnB4IiBoZWlnaHQ9IjE2cHgiPgo8Zz4KCTxwYXRoIGQ9Ik04LDBDMy41ODIsMCwwLDMuNTgyLDAsOHMzLjU4Miw4LDgsOHM4LTMuNTgyLDgtOFMxMi40MTgsMCw4LDB6IE0xMiw5SDRWN2g4Vjl6IiBmaWxsPSIjRDgwMDI3Ii8+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPC9zdmc+Cg==" />
                                <md-tooltip>{{'REMOVE_VALUE' | translate}}</md-tooltip>
                                </span>
                            </div>
                        </div>


                        <div layout="row">
                            <div flex>
                                <md-input-container>
                                    <label>New Value</label>
                                    <input id="id{{stakeholder._id}}" ng-model="stakeholder.newValues">
                                </md-input-container>
                            </div>
                            <div>
                                <md-button class="md-primary md-raised" ng-click="vm.setValueIdentication(stakeholder)" class="md-primary">{{'ADD_VALUE' | translate}}</md-button>
                            </div>
                        </div>

                        <!--SugestÃ£o de valores
                        <div layout="row" layout-align="center start" ng-show="(stakeholder.sugestionValues.length > 0)">
                            <span class="acaoTitulo">{{vm.labelShowSuggestion}}&nbsp;</span>
                            <span class="acaoNormal">
                                <img  ng-click="vm.showSuggestion()" src={{vm.arrow}} />
                            </span>
                        </div>

                        <div ng-show="vm.isShowSuggestion">
                            <div ng-repeat="sv in stakeholder.sugestionValues">
                                <span>{{sv}}</span>
                                <span class="acaoNormal">
                                    <img ng-click="vm.selectStakeholderValue($index,stakeholder,sv)" src="data:image/svg+xml;utf8;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/Pgo8IS0tIEdlbmVyYXRvcjogQWRvYmUgSWxsdXN0cmF0b3IgMTkuMC4wLCBTVkcgRXhwb3J0IFBsdWctSW4gLiBTVkcgVmVyc2lvbjogNi4wMCBCdWlsZCAwKSAgLS0+CjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiBpZD0iTGF5ZXJfMSIgeD0iMHB4IiB5PSIwcHgiIHZpZXdCb3g9IjAgMCAzMDAuMDAzIDMwMC4wMDMiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDMwMC4wMDMgMzAwLjAwMzsiIHhtbDpzcGFjZT0icHJlc2VydmUiIHdpZHRoPSIxNnB4IiBoZWlnaHQ9IjE2cHgiPgo8Zz4KCTxnPgoJCTxwYXRoIGQ9Ik0xNTAsMEM2Ny4xNTksMCwwLjAwMSw2Ny4xNTksMC4wMDEsMTUwYzAsODIuODM4LDY3LjE1NywxNTAuMDAzLDE0OS45OTcsMTUwLjAwM1MzMDAuMDAyLDIzMi44MzgsMzAwLjAwMiwxNTAgICAgQzMwMC4wMDIsNjcuMTU5LDIzMi44MzksMCwxNTAsMHogTTIxMy4yODEsMTY2LjUwMWgtNDguMjd2NTAuNDY5Yy0wLjAwMyw4LjQ2My02Ljg2MywxNS4zMjMtMTUuMzI4LDE1LjMyMyAgICBjLTguNDY4LDAtMTUuMzI4LTYuODYtMTUuMzI4LTE1LjMyOHYtNTAuNDY0SDg3LjM3Yy04LjQ2Ni0wLjAwMy0xNS4zMjMtNi44NjMtMTUuMzI4LTE1LjMyOGMwLTguNDYzLDYuODYzLTE1LjMyNiwxNS4zMjgtMTUuMzI4ICAgIGw0Ni45ODQsMC4wMDNWOTEuMDU3YzAtOC40NjYsNi44NjMtMTUuMzI4LDE1LjMyNi0xNS4zMjhjOC40NjgsMCwxNS4zMzEsNi44NjMsMTUuMzI4LDE1LjMyOGwwLjAwMyw0NC43ODdsNDguMjY1LDAuMDA1ICAgIGM4LjQ2Ni0wLjAwNSwxNS4zMzEsNi44NiwxNS4zMjgsMTUuMzI4QzIyOC42MDcsMTU5LjY0MywyMjEuNzQyLDE2Ni41MDEsMjEzLjI4MSwxNjYuNTAxeiIgZmlsbD0iIzkxREM1QSIvPgoJPC9nPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+Cjwvc3ZnPgo=" />
                                <md-tooltip>{{'ADD_VALUE' | translate}}</md-tooltip>
                                </span>
                            </div>
                        </div>-->


                    </div>


                    <div layout="row" layout-align="start start" flex>
                        <md-button ng-click="vm.delPostIt($event,$index, stakeholder)" class="md-primary md-raised" aria-label="Remove Stekaholder">{{'BTN_REMOVE' | translate}}</md-button>
                        <span flex></span>
                        <md-button type="submit" class="md-raised md-hue-1"
                                   ng-class="{'md-primary': (onionForm.$dirty && onionForm.$valid) }"
                                   aria-label="Save">{{'BTN_SAVE' | translate}}</md-button>
                    </div>
                </form>
            </div>
        </div>
    </div>
    <div layout="row" layout-sm="column" layout-align="space-around" ng-show="vm.inProcessing">
        <md-progress-circular md-mode="indeterminate"></md-progress-circular>
    </div>
</div>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               