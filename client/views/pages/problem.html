<div layout="column" flex-auto data-ng-init="vm.getCurrentProblem()">
    <div layout="column" flex>
    <md-toolbar flex>
        <div class="md-toolbar-tools">
            <h3>
                <span><img src="views/img/logo_barra.png" /> {{'NAME_SYSTEM' | translate }}</span>
            </h3>
            <span flex flex-md="100"></span>
            <md-button ng-click="vm.formInviteCollaborator($event)" class="md-fab md-primary" aria-label="Edit Collaborators">
                <md-tooltip>
                    {{'EDIT_COLLABORATORS' | translate}}
                </md-tooltip>
                <md-icon md-svg-src="views/img/icon/group.svg"></md-icon>
            </md-button>

            <md-button ng-click="vm.formEditProblem($event)" class="md-fab md-primary" aria-label="Edit Description">
                <md-tooltip>
                    {{'EDIT_PROBLEM_DESCRIPTION' | translate}}
                </md-tooltip>
                <md-icon md-svg-src="views/img/icon/ic_edit_24px.svg"></md-icon>
            </md-button>
            <md-button ng-click="vm.systemReturn()" class="md-fab md-primary" aria-label="Chat">
                <md-tooltip>
                    {{'YOUR_DESIGNS' | translate}}
                </md-tooltip>
                <md-icon md-svg-src="views/img/icon/ic_home_24px.svg"></md-icon>
            </md-button>
           <md-button ng-click="vm.formProblemReport()" class="md-fab md-primary" aria-label="Chat">
                <md-tooltip>
                    {{'HTML_REPORT' | translate}}
                </md-tooltip>
               <md-icon md-svg-src="views/img/icon/report1.svg"></md-icon>
            </md-button>
            <md-button ng-click="vm.doLogout()" class="md-fab md-primary" aria-label="Out app">
                <md-tooltip>
                    {{'LABEL_LOGOUT' | translate }}
                </md-tooltip>
                <md-icon md-svg-src="views/img/icon/ic_exit_to_app_24px.svg"></md-icon>
            </md-button>
        </div>
    </md-toolbar>
</div>
<div class="" ui-view="problem-description"></div>
<div  ng-cloak>
        <md-tabs md-border-bottom md-selected="selectedIndex" md-dynamic-height>
            <md-tab ng-repeat="tab in vm.dsc_artifacts" ng-click="vm.loadArtifact(tab.name)"
                    label="{{tab.label}}">
            </md-tab>
        </md-tabs>

    <div class="md-padding" class="" ui-view="dsc-artifact"></div>
</div>
<md-content>
    <div class="chatarea" ng-controller="chatDSC as vm" data-ng-init="vm.initHistoryChat()">
        <div class="chat">
            <div ng-show="vm.showUser">
                <ul ng-repeat="user in vm.usersOnLine">
                    <li ng-if="user != vm.nickname" )>{{ user }}</li>
                </ul>
            </div>
            <div layout-align="end end" ng-mouseover="vm.showUsersOnLine()" ng-mouseleave="vm.showUsersOnLine()" layout="row" class="chathead" id="chathead" ng-click="vm.openChat()">
                <div><img src="{{ vm.photo }}" /></div>
                <div>{{vm.nickname}}</div>
                <span flex></span>
                <div>
                    <span ng-hide="vm.isOpenChat"><img src="data:image/svg+xml;utf8;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/Pgo8IS0tIEdlbmVyYXRvcjogQWRvYmUgSWxsdXN0cmF0b3IgMTYuMC4wLCBTVkcgRXhwb3J0IFBsdWctSW4gLiBTVkcgVmVyc2lvbjogNi4wMCBCdWlsZCAwKSAgLS0+CjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+CjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4PSIwcHgiIHk9IjBweCIgd2lkdGg9IjE2cHgiIGhlaWdodD0iMTZweCIgdmlld0JveD0iMCAwIDMyLjUyOSAzMi41MjkiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDMyLjUyOSAzMi41Mjk7IiB4bWw6c3BhY2U9InByZXNlcnZlIj4KPGc+Cgk8cGF0aCBkPSJNMTguNzIsMTMuODExYy0wLjg0Ni0wLjg0Ni0wLjg0Ni0yLjIxNywwLTMuMDYzbDYuMTY4LTYuMTY4bC0zLjEzMS0wLjI1NGMtMC41MzMtMC4wNDUtMS4wMDYtMC4yNzctMS4zNTctMC42MjggICBjLTAuNDM0LTAuNDM0LTAuNjgyLTEuMDQ4LTAuNjI3LTEuNzA3YzAuMS0xLjE5MiwxLjE0NS0yLjA4LDIuMzM0LTEuOTgzbDcuNzk5LDAuNjM1YzEuMDU5LDAuMDg4LDEuODk2LDAuOTI3LDEuOTgyLDEuOTgzICAgbDAuNjM1LDcuNzk3YzAuMDk4LDEuMTkxLTAuNzkxLDIuMjM2LTEuOTgyLDIuMzM0Yy0xLjE5LDAuMDk3LTIuMjM1LTAuNzkxLTIuMzM0LTEuOTgzbC0wLjI1NC0zLjEyOWwtNi4xNjgsNi4xNjcgICBDMjAuOTM3LDE0LjY1OSwxOS41NjUsMTQuNjU5LDE4LjcyLDEzLjgxMXogTTEwLjc0NywxOC43MTlsLTYuMTY2LDYuMTY3bC0wLjI1Ni0zLjEzYy0wLjA5OC0xLjE5Mi0xLjE0My0yLjA4LTIuMzM0LTEuOTgyICAgYy0xLjE5MywwLjA5OS0yLjA4LDEuMTQ0LTEuOTg0LDIuMzMzbDAuNjM1LDcuOGMwLjA4NiwxLjA1NiwwLjkyNywxLjg5NSwxLjk4NCwxLjk4bDcuNzk3LDAuNjM1ICAgYzEuMTkxLDAuMDk5LDIuMjM2LTAuNzkxLDIuMzM0LTEuOTgxYzAuMDU1LTAuNjU5LTAuMTkzLTEuMjczLTAuNjI3LTEuNzA4Yy0wLjM1Mi0wLjM1My0wLjgyMi0wLjU4Mi0xLjM1NS0wLjYyN0w3LjY0NCwyNy45NSAgIGw2LjE2Ni02LjE2N2MwLjg0OS0wLjg0OCwwLjg0OS0yLjIxOSwwLjAwMi0zLjA2M0MxMi45NjQsMTcuODcyLDExLjU5MywxNy44NzIsMTAuNzQ3LDE4LjcxOXogTTMwLjUzOCwxOS43NzIgICBjLTAuNjYtMC4wNTUtMS4yNzMsMC4xOTMtMS43MDcsMC42MjdjLTAuMzUzLDAuMzUzLTAuNTg0LDAuODIzLTAuNjI3LDEuMzU2bC0wLjI1NiwzLjEzbC02LjE2Ni02LjE2NyAgIGMtMC44NDktMC44NDYtMi4yMi0wLjg0Ni0zLjA2MiwwYy0wLjg0OSwwLjg0Ni0wLjg0OSwyLjIxOCwwLDMuMDYzbDYuMTY2LDYuMTY3bC0zLjEzMiwwLjI1NGMtMS4xOSwwLjA5OC0yLjA3NywxLjE0NC0xLjk4MSwyLjMzNSAgIGMwLjA5OSwxLjE5LDEuMTQ0LDIuMDgsMi4zMzcsMS45ODJsNy43OTUtMC42MzZjMS4wNTctMC4wODYsMS44OTYtMC45MjUsMS45ODMtMS45ODFsMC42MzMtNy43OTkgICBDMzIuNjE5LDIwLjkxNSwzMS43MzEsMTkuODY5LDMwLjUzOCwxOS43NzJ6IE03LjY0NCw0LjU4bDMuMTMxLTAuMjU0YzEuMTkxLTAuMDk4LDIuMDc4LTEuMTQzLDEuOTgyLTIuMzM2ICAgYy0wLjA5OS0xLjE5Mi0xLjE0NC0yLjA3OS0yLjMzNS0xLjk4M0wyLjYyMywwLjY0M0MxLjU2OCwwLjcyOSwwLjcyNywxLjU2OCwwLjY0MiwyLjYyNmwtMC42MzUsNy43OTcgICBjLTAuMDk3LDEuMTkyLDAuNzksMi4yMzYsMS45ODMsMi4zMzRjMC42NTcsMC4wNTQsMS4yNzItMC4xOTMsMS43MDctMC42MjhjMC4zNTMtMC4zNTEsMC41ODQtMC44MjEsMC42MjctMS4zNTVMNC41OCw3LjY0MyAgIGw2LjE2OCw2LjE2N2MwLjg0NSwwLjg0NywyLjIxOCwwLjg0NywzLjA2MiwwYzAuODQ4LTAuODQ2LDAuODQ4LTIuMjE3LDAuMDAyLTMuMDYzTDcuNjQ0LDQuNTh6IiBmaWxsPSIjRkZGRkZGIi8+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPC9zdmc+Cg==" /></span>
                    <span ng-show="vm.isOpenChat"><img src="data:image/svg+xml;utf8;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/Pgo8IS0tIEdlbmVyYXRvcjogQWRvYmUgSWxsdXN0cmF0b3IgMTguMC4wLCBTVkcgRXhwb3J0IFBsdWctSW4gLiBTVkcgVmVyc2lvbjogNi4wMCBCdWlsZCAwKSAgLS0+CjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+CjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDIxMC4wMDIgMjEwLjAwMiIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgMjEwLjAwMiAyMTAuMDAyOyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSIgd2lkdGg9IjE2cHgiIGhlaWdodD0iMTZweCI+CjxwYXRoIGQ9Ik0xOTUuNzY1LDc2LjgxNWwtNzcuNDI0LDExLjExOGwxMS4xMTktNzcuNDIybDE5LjkzMiwxOS45MzFsMzAuNDQ1LTMwLjQ0MWwyNi40MzksMjYuNDQgIGwtMzAuNDQxLDMwLjQ0NEwxOTUuNzY1LDc2LjgxNXogTTM0LjE2OCwxNTMuMTE3TDMuNzI1LDE4My41NjNsMjYuNDM5LDI2LjQzOWwzMC40NDUtMzAuNDQxbDE5LjkzMiwxOS45M2wxMS4xMTktNzcuNDIyICBsLTc3LjQyMiwxMS4xMTlMMzQuMTY4LDE1My4xMTd6IE02MC42MSwzMC40NDFMMzAuMTY0LDBMMy43MjUsMjYuNDRsMzAuNDQzLDMwLjQ0NGwtMTkuOTMsMTkuOTMxTDkxLjY2LDg3LjkzM0w4MC41NDEsMTAuNTExICBMNjAuNjEsMzAuNDQxeiBNMTk1Ljc2NSwxMzMuMTg4bC03Ny40MjQtMTEuMTE5bDExLjExOSw3Ny40MjJsMTkuOTMyLTE5LjkzbDMwLjQ0NSwzMC40NDFsMjYuNDM5LTI2LjQzOWwtMzAuNDQxLTMwLjQ0NSAgTDE5NS43NjUsMTMzLjE4OHoiIGZpbGw9IiNGRkZGRkYiLz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPC9zdmc+Cg==" />
                </div>

            </div>

            <div id="togglearea" ng-show="vm.isOpenChat">
                <div class="feed" style="height: 400px;"  scroll-glue>
                    <div ng-repeat="msg in vm.messages">
                        <div ng-if="msg.nickname == vm.nickname">
                            <div ng-dblclick="vm.returnChat(msg)" class="bubble me">
                                <span>{{msg.time}} {{msg.nickname}} : {{msg.msg}}</span>
                                <span ng-show="msg.isReturnMsg">

                                     <div class="messageboxReturn" flex layout="row" layout-align="center center">
                    <textarea ng-keydown="vm.keypressChatReturn($event,msg)" id="message" ng-model="msg.newMsg"></textarea>
                </div>

                                </span>
                            </div>
                        </div>
                        <div ng-if="msg.nickname != vm.nickname">
                            <div ng-dblclick="vm.returnChat(msg)" class="bubble you">
                                <span>{{msg.time}} {{msg.nickname}} : {{msg.msg}}</span>
                                <div ng-show="msg.isReturnMsg">

                                    <div class="messageboxReturn" flex layout="row" layout-align="center center">
                                        <textarea ng-keydown="vm.keypressChatReturn($event,msg)" id="message" ng-model="msg.newMsg"></textarea>
                                    </div>

                                </div>

                            </div>
                        </div>
                    </div>

                </div><!-- feed -->
                <div class="messagebox" flex layout="row" layout-align="center center">
                    <textarea id="fieldNewMessage" md-auto-focus ng-keydown="vm.keypressChat($event,vm.newmsg)" id="message" ng-model="vm.newmsg"></textarea>
                </div>
                <div class="messagebox" flex layout="row" layout-align="end end">
                    <span layout-fill></span>
                    <md-icon><img ng-click="vm.sendMessage(vm.newmsg)" src="data:image/svg+xml;utf8;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/Pgo8IS0tIEdlbmVyYXRvcjogQWRvYmUgSWxsdXN0cmF0b3IgMTYuMC4wLCBTVkcgRXhwb3J0IFBsdWctSW4gLiBTVkcgVmVyc2lvbjogNi4wMCBCdWlsZCAwKSAgLS0+CjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+CjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4PSIwcHgiIHk9IjBweCIgd2lkdGg9IjE2cHgiIGhlaWdodD0iMTZweCIgdmlld0JveD0iMCAwIDUzNS41IDUzNS41IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA1MzUuNSA1MzUuNTsiIHhtbDpzcGFjZT0icHJlc2VydmUiPgo8Zz4KCTxnIGlkPSJzZW5kIj4KCQk8cG9seWdvbiBwb2ludHM9IjAsNDk3LjI1IDUzNS41LDI2Ny43NSAwLDM4LjI1IDAsMjE2Ljc1IDM4Mi41LDI2Ny43NSAwLDMxOC43NSAgICIgZmlsbD0iIzkxREM1QSIvPgoJPC9nPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+Cjwvc3ZnPgo=" /></md-icon>
                </div>
            </div>
        </div><!-- chatbox -->
    </div><!-- chat container -->
</md-content>
<buttonhelp></buttonhelp>
</div>