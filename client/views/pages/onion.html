<div ng-init="vm.initOnion3Layer()">

    <svg id="svg" height="800" width="1200">
        <circle id="legendInformal" cx="980" cy="10" r="8" style="fill: #E0F2F1;" ng-mouseover="vm.acende('Informal');" ng-mouseleave="vm.apaga('Informal','#E0F2F1');"/>
        <text id="nameInformal" style="font-size: 14px" x="995" y="15" ng-mouseover="vm.acende('Informal');" ng-mouseleave="vm.apaga('Informal','#E0F2F1');">Informal</text>
        <text x="995" y="26" style="font-size: 10px">Real world</text>

        <circle id="legendFormal" cx="980" cy="40" r="8" style="fill: #80CBC4;" ng-mouseover="vm.acende('Formal');" ng-mouseleave="vm.apaga('Formal','#80CBC4');"/>
        <text id="nameFormal" x="995" y="45" ng-mouseover="vm.acende('Formal');" ng-mouseleave="vm.apaga('Formal','#80CBC4');">Formal</text>
        <text x="995" y="56" style="font-size: 10px">Norms, rules, semantics</text>

        <circle id="legendTechnical" cx="980" cy="70" r="8" style="fill: #26A69A;" ng-mouseover="vm.acende('Technical');" ng-mouseleave="vm.apaga('Technical','#26A69A');"/>
        <text id="nameTechnical" x="995" y="75"  ng-mouseover="vm.acende('Technical');" ng-mouseleave="vm.apaga('Technical','#26A69A');">Technical</text>
        <text x="995" y="86" style="font-size: 10px">Tools, system</text>


        <ellipse id="Informal" cx="500" cy="320" rx="480" ry="320" fill="#E0F2F1"  ng-mouseover="vm.acende('Informal');" ng-mouseleave="vm.apaga('Informal','#E0F2F1');" ng-dblclick="vm.addPostIt($event, 'Informal');"/>
        <ellipse id="Formal" cx="500" cy="420" rx="360" ry="220" fill="#80CBC4"  ng-mouseover="vm.acende('Formal');" ng-mouseleave="vm.apaga('Formal','#80CBC4');" ng-dblclick="vm.addPostIt($event, 'Formal');"/>
        <ellipse id="Technical" cx="500" cy="520" rx="220" ry="120" fill="#26A69A"  ng-mouseover="vm.acende('Technical');" ng-mouseleave="vm.apaga('Technical','#26A69A');" ng-dblclick="vm.addPostIt($event, 'Technical');"/>
    </svg>

    <div ng-repeat="postit in vm.onion3LayerList">
        <div draggable style="position: absolute; top: {{postit.y}}; left:{{postit.x}}; z-index:{{postit.zindex}}" class="sticky-note" id="postit{{postit._id}}">
            <span ng-hide="postit.openEdit"><i class="pin"></i></span>
            <div id="moveStakeholder" ng-hide="postit.openEdit">
                <div class="btnedit"><span ng-click="vm.setOpenEdit(postit._id)">{{postit.title}}</span>
                 <span>
                        <a ng-click="vm.delPostIt($event,$index, postit)"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAACqklEQVQ4T4WTXUiTURjHn/ec933Xq5OZ5ucc5kydTtYqBmWRQVhBmN6JRdlFpKBd6CLLoCaVBmKR5EVYI7xQL1IQkUiEAjXBCZof86MiP3jT5rKltY9370ds4LCa+lyci/M/53ee5/+ch3iiVqccOpdrjk9UJQy+ML+8MGGthm3iEUBEdEpyTWxq2qkv/QMtRJ+xfPrgmZw0+ud3YPv7vH3tXeaLi0slwRj1FHU4Tad7HqPNSF2aX5ifHRq8RViqKr9mHtDG7VpbAVj4DJx1FHrfjU5ZVpxZJgCHD2QCQEnhild6vT7fgZBzYmy8vNRub/JphG95plKVG3T7bqfL+UjMzoHT5oChZbd9bM2bTpGkRkOTnUqlMmLS6bZMsewxEwC3kaEfsBHNclmDLgyX7BEFivOIMOMSfjECMHKSxMOi1FzCeYv+Le0vgE+sB1DFM2SXRhT3Y14ClyjBACbrKnj+RjBf/gOYAEL2kqQlU+AzQAKgMAEjGA1f5gTDjoB6BlRqDo0kC2LkGkGAFaNuDQ2nE0MQ2b4OTys83mtblvAgFGK0LmI6SZTCBUzAe4zayjih8D6N8/KiqXY5g1HTR6++BrixzRB/Cb42pWI0nyGKCRRFwAcCzZ33CEkbB+/QuKBYzbSNrvJzZ23uwH6gjY0YtWRJYiEjw7CMCP4tj7XVHs/s5pcaGPphbixd2bHkuWp0e/1/wA+4CxCdHbWbVXl+kwIpQrcTao1uviqYYR3hshkFIqJOrrojAoDHirAreTknmsIWpmH1Gyv12qTEUpdrMRjgHkDyUYVs0uriC8o4odOfQW2o7EzRTePrOMEBsz09Qtf4p9jr62Dfap4aabJOCfAjn+NrAh60ZmcNHjluMLwxt7YUs7ZL2wyjX/KZbgIQA4CdLmyn/wENmQFM5/MDlQAAAABJRU5ErkJggg==" /> <!--<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAaElEQVQ4T2NkwA4WMDAwxKNJgcQS0ZUzQgUcGBgY9uMwDJewIwMDwwGYAQYMDAwTSDSggIGB4QLMAJBeBSzOxmXmQgYGhgcgSWQDSPEG2PmjBoyGweBMB6CUuYGBgcGfQKYC5YMEmBoAfNQgEXHOeoIAAAAASUVORK5CYII="/>--></a>
                        <md-tooltip>
                    Remove {{postit.title}}
                </md-tooltip>
                    </span>
                </div>
            </div>
            <div ng-show=postit.openEdit>
                    <div layout="row" layout-align="start start" flex>
                        <span>{{postit.layer}}</span>
                        <span flex></span>
                    <span class="acaoNormal">
                        <img ng-click="vm.minimizePostit(postit)" width="16" height="16" src="views/img/icon/minimize2.svg">
                    </span>
                    </div>
                <form name="onionForm" data-ng-submit="vm.saveOnion3Layer(postit)">
                    <div>
                    <md-input-container>
                        <label>{{'LABEL_TITLE' | translate}}</label>
                        <input class="description" ng-model="postit.title" required>
                    </md-input-container>
                    </div>
                    <div>
                    <md-input-container>
                        <label>{{'LABEL_DESCRIPTION' | translate}}</label>
                        <textarea class="description" ng-model="postit.description" required></textarea>
                    </md-input-container>
                    </div>
                    <div layout-align="center center" flex>
                    <md-button type="submit" class="md-raised md-hue-1"
                               ng-class="{'md-primary md-raised1': (onionForm.$dirty && onionForm.$valid) }"
                               aria-label="invite">{{'BTN_SAVE' | translate}}</md-button>
                    </div>
                </form>
            </div>
        </div>
    </div>
    <div layout="row" layout-sm="column" layout-align="space-around" ng-show="vm.inProcessing">
        <md-progress-circular md-mode="indeterminate"></md-progress-circular>
    </div>
</div>